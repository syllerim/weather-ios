language: objective-c
osx_image: xcode9.2

cache:
  directories:
  - Carthage

before_install:
  - brew update
  - brew outdated carthage || brew upgrade carthage

env:
  global:
    - PROJECT="weaterify-ios.xcodeproj"
  matrix:
  - ACTION='build test'  PLATFORM=iOS     SCHEME='weaterify-ios'         CACHE_NAME=IOS      DESTINATION='platform=iOS Simulator,OS=11.0,name=iPhone 8 Plus'

install:
  - carthage bootstrap --no-use-binaries --platform $PLATFORM --cache-builds

before_script:
  - set -o pipefail

script:
  - xcodebuild clean $ACTION -project "$PROJECT" -sdk iphonesimulator -destination "$DESTINATION" | xcpretty -c;

after_success:
  - bash <(curl -s https://codecov.io/bash) 

notifications:
  email: true
